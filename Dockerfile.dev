# ============================================
# Ballot Builder - Development Dockerfile
# ============================================
# This Dockerfile is for backend development with hot-reloading.

FROM node:20-alpine

WORKDIR /app/backend

# Install nodemon globally for hot-reload
RUN npm install -g nodemon

# Copy package files
COPY backend/package*.json ./

# Install all dependencies (including devDependencies)
RUN npm install

# Copy backend source
COPY backend ./

# Expose the API port
EXPOSE 3001

# Start with nodemon for hot-reload
CMD ["nodemon", "--watch", "src", "src/index.js"]
